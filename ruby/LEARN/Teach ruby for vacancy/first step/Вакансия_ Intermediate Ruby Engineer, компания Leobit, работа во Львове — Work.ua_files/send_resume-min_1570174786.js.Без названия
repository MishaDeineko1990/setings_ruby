function array_unique(e){var t,i,r;for(i=e.length;i;)for(t=--i;t>0;)if(e[i]===e[--t]){for(r=t;--t&&e[i]===e[t];);i-=e.splice(t+1,r-t).length}return e}function _fieldErr(){return 0==arguments.length?"":1==arguments.length?lang.validate.messages[arguments[0]]||"":(arguments[0]=lang.validate.messages[arguments[0]]||"",arguments[1]=lang.validate.fields[arguments[1]]||"",$.validator.format.apply(this,arguments))}function _detectSocial(e){var t=window.socialRestriction;for(var i in t)if(new RegExp(t[i].regexp.slice(1,-2),"i").test(e))return t[i].name;return!1}function _isMainPageSocial(e){var t=window.socialRestriction;for(var i in t)if(new RegExp(t[i].regexp_main.slice(1,-2),"i").test(e))return!0;return!1}!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){e.extend(e.fn,{validate:function(t){if(!this.length)return void(t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var i=e.data(this[0],"validator");return i||(this.attr("novalidate","novalidate"),i=new e.validator(t,this[0]),e.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(t){i.settings.submitHandler&&(i.submitButton=t.target),e(t.target).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==e(t.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(t){function r(){var r,n;return!i.settings.submitHandler||(i.submitButton&&(r=e("<input type='hidden'/>").attr("name",i.submitButton.name).val(e(i.submitButton).val()).appendTo(i.currentForm)),n=i.settings.submitHandler.call(i,i.currentForm,t),i.submitButton&&r.remove(),void 0!==n&&n)}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,r()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):r():(i.focusInvalid(),!1)})),i)},valid:function(){var t,i;return e(this[0]).is("form")?t=this.validate().form():(t=!0,i=e(this[0].form).validate(),this.each(function(){t=i.element(this)&&t})),t},removeAttrs:function(t){var i={},r=this;return e.each(t.split(/\s/),function(e,t){i[t]=r.attr(t),r.removeAttr(t)}),i},rules:function(t,i){var r,n,s,a,o,l,d=this[0];if(t)switch(r=e.data(d.form,"validator").settings,n=r.rules,s=e.validator.staticRules(d),t){case"add":e.extend(s,e.validator.normalizeRule(i)),delete s.messages,n[d.name]=s,i.messages&&(r.messages[d.name]=e.extend(r.messages[d.name],i.messages));break;case"remove":return i?(l={},e.each(i.split(/\s/),function(t,i){l[i]=s[i],delete s[i],"required"===i&&e(d).removeAttr("aria-required")}),l):(delete n[d.name],s)}return a=e.validator.normalizeRules(e.extend({},e.validator.classRules(d),e.validator.attributeRules(d),e.validator.dataRules(d),e.validator.staticRules(d)),d),a.required&&(o=a.required,delete a.required,a=e.extend({required:o},a),e(d).attr("aria-required","true")),a.remote&&(o=a.remote,delete a.remote,a=e.extend(a,{remote:o})),a}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){return!!e.trim(""+e(t).val())},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,i){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=i,this.init()},e.validator.format=function(t,i){return 1===arguments.length?function(){var i=e.makeArray(arguments);return i.unshift(t),e.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=e.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),e.each(i,function(e,i){t=t.replace(new RegExp("\\{"+e+"\\}","g"),function(){return i})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){9===t.which&&""===this.elementValue(e)||(e.name in this.submitted||e===this.lastElement)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,i,r){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(r):e(t).addClass(i).removeClass(r)},unhighlight:function(t,i,r){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(r):e(t).removeClass(i).addClass(r)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var i=e.data(this[0].form,"validator"),r="on"+t.type.replace(/^validate/,""),n=i.settings;n[r]&&!this.is(n.ignore)&&n[r].call(i,this[0],t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i,r=this.groups={};e.each(this.settings.groups,function(t,i){"string"==typeof i&&(i=i.split(/\s/)),e.each(i,function(e,i){r[i]=t})}),i=this.settings.rules,e.each(i,function(t,r){i[t]=e.validator.normalizeRule(r)}),e(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",t).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",t),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler),e(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){var i=this.clean(t),r=this.validationTargetFor(i),n=!0;return this.lastElement=r,void 0===r?delete this.invalid[i.name]:(this.prepareElement(r),this.currentElements=e(r),n=!1!==this.check(r),n?delete this.invalid[r.name]:this.invalid[r.name]=!0),e(t).attr("aria-invalid",!n),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),n},showErrors:function(t){if(t){e.extend(this.errorMap,t),this.errorList=[];for(var i in t)this.errorList.push({message:t[i],element:this.findByName(i)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,i=0;for(t in e)i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,i={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled], [readonly]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in i||!t.objectLength(e(this).rules()))&&(i[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return e(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var i,r=e(t),n=t.type;return"radio"===n||"checkbox"===n?e("input[name='"+t.name+"']:checked").val():"number"===n&&void 0!==t.validity?!t.validity.badInput&&r.val():(i=r.val(),"string"==typeof i?i.replace(/\r/g,""):i)},check:function(t){t=this.validationTargetFor(this.clean(t));var i,r,n,s=e(t).rules(),a=e.map(s,function(e,t){return t}).length,o=!1,l=this.elementValue(t);for(r in s){n={method:r,parameters:s[r]};try{if("dependency-mismatch"===(i=e.validator.methods[r].call(this,l,t,n.parameters))&&1===a){o=!0;continue}if(o=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!i)return this.formatAndAdd(t,n),!1}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+n.method+"' method.",e),e}}if(!o)return this.objectLength(s)&&this.successList.push(t),!0},customDataMessage:function(t,i){return e(t).data("msg"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase())||e(t).data("msg")},customMessage:function(e,t){var i=this.settings.messages[e];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(t,i){return this.findDefined(this.customMessage(t.name,i),this.customDataMessage(t,i),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[i],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,i){var r=this.defaultMessage(t,i.method),n=/\$?\{(\d+)\}/g;"function"==typeof r?r=r.call(this,i.parameters,t):n.test(r)&&(r=e.validator.format(r.replace(n,"{$1}"),i.parameters)),this.errorList.push({message:r,element:t,method:i.method}),this.errorMap[t.name]=r,this.submitted[t.name]=r},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t,i;for(e=0;this.errorList[e];e++)i=this.errorList[e],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var r,n,s,a=this.errorsFor(t),o=this.idOrName(t),l=e(t).attr("aria-describedby");a.length?(a.removeClass(this.settings.validClass).addClass(this.settings.errorClass),a.html(i)):(a=e("<"+this.settings.errorElement+">").attr("id",o+"-error").addClass(this.settings.errorClass).html(i||""),r=a,this.settings.wrapper&&(r=a.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(r):this.settings.errorPlacement?this.settings.errorPlacement(r,e(t)):r.insertAfter(t),a.is("label")?a.attr("for",o):0===a.parents("label[for='"+o+"']").length&&(s=a.attr("id").replace(/(:|\.|\[|\])/g,"\\$1"),l?l.match(new RegExp("\\b"+s+"\\b"))||(l+=" "+s):l=s,e(t).attr("aria-describedby",l),(n=this.groups[t.name])&&e.each(this.groups,function(t,i){i===n&&e("[name='"+t+"']",this.currentForm).attr("aria-describedby",a.attr("id"))}))),!i&&this.settings.success&&(a.text(""),"string"==typeof this.settings.success?a.addClass(this.settings.success):this.settings.success(a,t)),this.toShow=this.toShow.add(a)},errorsFor:function(t){var i=this.idOrName(t),r=e(t).attr("aria-describedby"),n="label[for='"+i+"'], label[for='"+i+"'] *";return r&&(n=n+", #"+r.replace(/\s+/g,", #")),this.errors().filter(n)},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),e(t).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+t+"']")},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return e("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(t,i){return!!e(t,i.form).length},function:function(e,t){return e(t)}},optional:function(t){var i=this.elementValue(t);return!e.validator.methods.required.call(this,i,t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor===String?this.classRuleSettings[t]=i:e.extend(this.classRuleSettings,t)},classRules:function(t){var i={},r=e(t).attr("class");return r&&e.each(r.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(i,e.validator.classRuleSettings[this])}),i},attributeRules:function(t){var i,r,n={},s=e(t),a=t.getAttribute("type");for(i in e.validator.methods)"required"===i?(r=t.getAttribute(i),""===r&&(r=!0),r=!!r):r=s.attr(i),/min|max/.test(i)&&(null===a||/number|range|text/.test(a))&&(r=Number(r)),r||0===r?n[i]=r:a===i&&"range"!==a&&(n[i]=!0);return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},dataRules:function(t){var i,r,n={},s=e(t);for(i in e.validator.methods)void 0!==(r=s.data("rule"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase()))&&(n[i]=r);return n},staticRules:function(t){var i={},r=e.data(t.form,"validator");return r.settings.rules&&(i=e.validator.normalizeRule(r.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return e.each(t,function(r,n){if(!1===n)return void delete t[r];if(n.param||n.depends){var s=!0;switch(typeof n.depends){case"string":s=!!e(n.depends,i.form).length;break;case"function":s=n.depends.call(i,i)}s?t[r]=void 0===n.param||n.param:delete t[r]}}),e.each(t,function(r,n){t[r]=e.isFunction(n)?n(i):n}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){var i;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(i=t[this].replace(/[\[\]]/g,"").split(/[\s,]+/),t[this]=[Number(i[0]),Number(i[1])]))}),e.validator.autoCreateRanges&&(null!=t.min&&null!=t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),null!=t.minlength&&null!=t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var i={};e.each(t.split(/\s/),function(){i[this]=!0}),t=i}return t},addMethod:function(t,i,r){e.validator.methods[t]=i,e.validator.messages[t]=void 0!==r?r:e.validator.messages[t],i.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,i,r){if(!this.depend(r,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var n=e(i).val();return n&&n.length>0}return this.checkable(i)?this.getLength(t,i)>0:e.trim(t).length>0},email:function(e,t){return this.optional(t)||/^[a-z\d_\.\+-]+@([\w_-]+\.)+(\w+)$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;var i,r,n=0,s=0,a=!1;if(e=e.replace(/\D/g,""),e.length<13||e.length>19)return!1;for(i=e.length-1;i>=0;i--)r=e.charAt(i),s=parseInt(r,10),a&&(s*=2)>9&&(s-=9),n+=s,a=!a;return n%10==0},minlength:function(t,i,r){var n=e.isArray(t)?t.length:this.getLength(e.trim(t),i);return this.optional(i)||n>=r},maxlength:function(t,i,r){var n=e.isArray(t)?t.length:this.getLength(e.trim(t),i);return this.optional(i)||n<=r},rangelength:function(t,i,r){var n=e.isArray(t)?t.length:this.getLength(e.trim(t),i);return this.optional(i)||n>=r[0]&&n<=r[1]},min:function(e,t,i){return this.optional(t)||e>=i},max:function(e,t,i){return this.optional(t)||e<=i},range:function(e,t,i){return this.optional(t)||e>=i[0]&&e<=i[1]},equalTo:function(t,i,r){var n=e(r);return this.settings.onfocusout&&n.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){e(i).valid()}),t===n.val()},remote:function(t,i,r){if(this.optional(i))return"dependency-mismatch";var n,s,a=this.previousValue(i);return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),a.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=a.message,r="string"==typeof r&&{url:r}||r,a.old===t?a.valid:(a.old=t,n=this,this.startRequest(i),s={},s[i.name]=t,e.ajax(e.extend(!0,{url:r,mode:"abort",port:"validate"+i.name,dataType:"json",data:s,context:n.currentForm,success:function(r){var s,o,l,d=!0===r||"true"===r;n.settings.messages[i.name].remote=a.originalMessage,d?(l=n.formSubmitted,n.prepareElement(i),n.formSubmitted=l,n.successList.push(i),delete n.invalid[i.name],n.showErrors()):(s={},o=r||n.defaultMessage(i,"remote"),s[i.name]=a.message=e.isFunction(o)?o(t):o,n.invalid[i.name]=!0,n.showErrors(s)),a.valid=d,n.stopRequest(i,d)}},r)),"pending")}}}),e.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead."};var t,i={};e.ajaxPrefilter?e.ajaxPrefilter(function(e,t,r){var n=e.port;"abort"===e.mode&&(i[n]&&i[n].abort(),i[n]=r)}):(t=e.ajax,e.ajax=function(r){var n=("mode"in r?r:e.ajaxSettings).mode,s=("port"in r?r:e.ajaxSettings).port;return"abort"===n?(i[s]&&i[s].abort(),i[s]=t.apply(this,arguments),i[s]):t.apply(this,arguments)}),e.extend(e.fn,{validateDelegate:function(t,i,r){return this.bind(i,function(i){var n=e(i.target);if(n.is(t))return r.apply(n,arguments)})}})}),$.extend($.validator.methods,{caps:function(e){return e.length<3||e.match(/[a-zа-яёіїґє']{3,}/g)},caps2:function(e){return e.length<3||e.match(/[a-zA-Zа-яА-ЯёЁіІїЇґҐєЄ']{3,}/g)},checkNum:function(e){return!e.match(/[^-a-zа-яїєіґё()'− ]/gi)},checkFio:function(e){return $.trim(e).split(/\s+/).length>1},cityCheck:function(e,t){return $hidden=$(t).parent().find(".js-rvalue"),$hidden.val()>0},socialNotMainPage:function(e){var t=!0,i=e.trim();return i&&_isMainPageSocial(i)&&(t=!1),t},socialDefineCheck:function(e){var t=!0,i=e.trim();return i&&!_detectSocial(i)&&(t=!1),t},socialDoubleCheck:function(e){var t=[],i=!0;if(e=e.trim()){var r=_detectSocial(e.trim());$("[name^='social_link_']:visible").each(function(){var e=$(this).val().trim();if(!e)return!0;var n=_detectSocial(e);if(n===r&&t[n])return i=!1,!1;t[n]=!0})}return i},addressCheck:function(e,t){return!!$(".modal-open").length||$(t).parent().find(".js-avalue").val()>=0},salary_letters:function(e){return""==e||!e.match(/[a-zA-Zа-яА-ЯёЁіІїЇґҐєЄ']{1,}/g)},checkWebsite:function(e){var t=e.trim().replace(/^https?:\/\//i,"").match(/^([a-zа-яіїєёґ\d](-*[a-zа-яіїєёґ\d_])*(\.[a-zа-яіїєёґ\d](-*[a-zа-яіїєёґ\d])*)+)(\/?\??[\S]*)$/i);return""==e.trim()||null!=t||null!=t&&void 0},checkQuotes:function(e){return null==e.trim().match(/["«»]/g)},salary_digits:function(e){return""==e||e.match(/^[0-9a-zA-Zа-яА-ЯёЁіІїЇґҐєЄ]{1,}$/g)},email2:function(e){return""==e||e.match(/^([\+a-z0-9_-]+\.)*[\+a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,}$/gi)},phone:function(e){var t=e.match(/\d/g);return t&&t.length>=10},phone2:function(e){if(""!=$.trim(e)){var t=e.match(/\d/g);return t&&t.length>=10}return!0},uniqwords:function(e){var t=e.replace(/(,|\.|\-|\!|\?|\&|\*|\(|\)|;|:'|"|\\)/g," ").replace(/(^|\s)\S{1,2}(\s|$)/," ").replace(/^\s+|\s+$/g,"").replace(/ +/g," ").toLowerCase(),i=t.split(" ");return i.length==array_unique(i).length},onlyother:function(e,t){return!(($.isArray(e)?e.length:this.getLength(e,t))>1&&$("#chk_32:checked",this.currentForm).length)},validDayMonthYear:function(e,t,i){var r=this,n=function(e){return $.trim($(r.currentForm).find("[name='"+e+"']").val())},s=n(i[0]),a=n(i[1]),o=n(i[2]);if(!s||!a||!o)return!0;var l=new Date(o,a-1,s);return l.getFullYear()==o&&l.getMonth()+1==a&&l.getDate()==s},dateRange:function(e,t){var i,r=this.settings.groups[this.groups[t.name]];if("string"==typeof r&&(r=r.split(/\s/)),navigator.userAgent.match(/(iPod|iPhone|iPad|Android)/)&&$(t).val()>0){for(i=0;i<r.length;i++)if(""==$.trim($(this.currentForm).find("[name='"+r[i]+"']").val())){$(this.currentForm).find("[name='"+r[i]+"']").trigger("focus");break}return!0}for(i=0;i<r.length;i++)if(""==$.trim($(this.currentForm).find("[name='"+r[i]+"']").val()))return!1;return!0},customFacultyRule:function(e,t,i){var r=$(this.currentForm).find(".js_education").val();if(69==r)return!0;if(68==r){var n=$.isArray(e)?e.length:this.getLength($.trim(e),t);return this.optional(t)||n<=i}return $.trim(e).length>0},endDateRange:function(e,t){var i,r=[],n=0,s=this.settings.groups[this.groups[t.name]];for("string"==typeof s&&(s=s.split(/\s/)),i=0;i<s.length;i++)""==$.trim($(this.currentForm).find("[name='"+s[i]+"']").val())&&(n+=1,r[i]=$.trim($(this.currentForm).find("[name='"+s[i]+"']").val()));return 0==n||n==i||""==r[1]},compareDateRange:function(e,t){var i,r=[],n=[],s=[],a=0,o=0,l=this.settings.rules[t.name].compareDateRange;if(groupStart=this.settings.groups[l.groupStart],groupEnd=this.settings.groups[l.groupEnd],"string"==typeof groupStart&&"string"==typeof groupEnd&&(groupStart=groupStart.split(/\s/),groupEnd=groupEnd.split(/\s/)),2!=groupStart.length&&2!=groupEnd.length)return!1;for(i=0;i<groupStart.length;i++)""==$.trim($(this.currentForm).find("[name='"+groupStart[i]+"']").val())?a+=1:r[i]=$.trim($(this.currentForm).find("[name='"+groupStart[i]+"']").val());for(i=0;i<groupEnd.length;i++)""==$.trim($(this.currentForm).find("[name='"+groupEnd[i]+"']").val())?(o+=1,s[i]=$.trim($(this.currentForm).find("[name='"+groupEnd[i]+"']").val())):n[i]=$.trim($(this.currentForm).find("[name='"+groupEnd[i]+"']").val());return 2==o||""==s[1]||0==a&&0==o&&(timestampEnd=Date.UTC(n[1],n[0],1,0,0,0),timestampStart=Date.UTC(r[1],r[0],1,0,0,0),timestampStart<=timestampEnd)},wordsCount:function(e,t,i){var r=new RegExp("([^\\s]+(\\s|,)+){"+i+",}","gi");return""==e||!e.replace(/,/gi," ").trim().match(r)},require_from_group:function(e,t,i){var r=$(i[1],t.form),n=r.eq(0),s=n.data("valid_req_grp")?n.data("valid_req_grp"):$.extend({},this),a=r.filter(function(){return s.elementValue(this)}).length>=i[0];return n.data("valid_req_grp",s),$(t).data("being_validated")||(r.data("being_validated",!0),r.each(function(){s.element(this)}),r.data("being_validated",!1)),a},textCapsPercent:function(e,t,i){return!!e.length&&(e=e.replace(/[^a-zа-яїєіґё]/gi,""),100*e.replace(/[a-zа-яїєіґё]/g,"").length/e.length<=i)}}),$.extend($.validator.defaults,{errorClass:"has-danger",validClass:"",errorElement:"p",focusCleanup:!0,onfocusout:function(e){if(/select/i.test(e.type)&&this.groups[e.name]){var t=this.groups[e.name],i=this;this.timers[t]&&clearTimeout(this.timers[t]),this.timers[t]=setTimeout(function(){i.element.call(i,e)},50)}else if(!this.checkable(e)){var i=this;setTimeout(function(){i.element(e)},50)}},onfocusin:function(e){if(/select/i.test(e.type)&&this.groups[e.name]){var t=this.groups[e.name];this.timers[t]&&clearTimeout(this.timers[t])}},onclick:function(e){e.name in this.submitted||this.checkable(e)?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},onchange:function(e){/select/i.test(e.type)},highlight:function(e,t,i){$(e).closest("div.form-group").removeClass(i).addClass(t)},unhighlight:function(e,t,i){$(e).closest("div.form-group").removeClass(t).addClass(i)},clearhighlight:function(e){$(e).closest("div.form-group").removeClass(this.errorClass).removeClass(this.validClass)},errorPlacement:function(e,t){$(t).closest("div.form-group").append(e)},submitHandler:function(e,t,i){return $.data(this.currentForm,"validator").hideFormError(),!0},invalidHandler:function(){$.data(this,"validator").showFormError()},onkeyup:function(e,t){if(!/select/i.test(e.type)&&9!==t.which&&16!==t.which)if(this.checkable(e)){if(9===t.which&&""===this.elementValue(e))return;(e.name in this.submitted||e===this.lastElement)&&this.element(e)}else 13!=t.which&&this.invalid[e.name]&&(submitted=this.formSubmitted,this.prepareElement(e),this.formSubmitted=submitted,this.successList.push(e),delete this.invalid[e.name],this.showErrors(),this.settings.clearhighlight(e))}}),$.extend($.validator.prototype,{timers:{},getErrorContainer:function(){var e=$(this.currentForm).prev("div.alert-danger");return e.length||(e=$("<div>").addClass("alert alert-danger js-err-bl-marker").hide().append($("<h2>"),$("<p>").hide()).insertBefore($(this.currentForm))),e},showFormError:function(e,t){if(!($("div.alert.alert-danger.js-err-bl-marker:visible").length>0)){var i=this.getErrorContainer();i.find("h2").html(void 0!==e?e:this.settings.errorTitle).show(),i.find("p").html(void 0!==t?t:this.settings.errorMessage)[void 0!==e&&void 0==t?"hide":"show"](),i.show()}},hideFormError:function(){this.getErrorContainer().hide()},errors:function(){this.settings.errorClass.split(" ").join(" ");return $(this.settings.errorElement+".text-danger",this.errorContext)},showPostErrors:function(e,t){var i,r,n={},s=this;"string"==typeof e?void 0==t?this.showFormError("",e):this.showFormError(e,t):($.each(e,function(e,t){i=s.findByName(e),!i.length&&(r=s.settings.groups[e])&&("string"==typeof r&&(r=r.split(/\s/)),e=r[0],i=s.findByName(e)),i.length&&(s.element(i[0]),s.invalid[e]=!0,n[e]=t)}),this.showErrors(n),this.showFormError())},errorsFor:function(e){var t=this.idOrName(e),i=$(e).attr("aria-describedby"),r="label[for='"+t+"'], label[for='"+t+"'] *";return i?r=r+", #"+i.replace(/\s+/g,", #"):""!=$(e).attr("id")&&(r=r+", #"+$(e).attr("id")+"-error"),this.errors().filter(r)},showLabel:function(e,t){var i,r,n,s=this.errorsFor(e),a=this.idOrName(e),o=$(e).attr("aria-describedby");s.length?(s.removeClass(this.settings.validClass).addClass(this.settings.errorClass),s.html(t)):(s=$("<"+this.settings.errorElement+">").attr("id",a+"-error").addClass("text-danger").html(t||""),i=s,this.settings.wrapper&&(i=s.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement(i,$(e)):i.insertAfter(e),s.is("label")?s.attr("for",a):0===s.parents("label[for='"+a+"']").length&&(n=s.attr("id").replace(/(:|\.|\[|\])/g,"\\$1"),o?o.match(new RegExp("\\b"+n+"\\b"))||(o+=" "+n):o=n,$(e).attr("aria-describedby",o),(r=this.groups[e.name])&&$.each(this.groups,function(e,t){t===r&&$("[name='"+e+"']",this.currentForm).attr("aria-describedby",s.attr("id"))}))),!t&&this.settings.success&&(s.text(""),"string"==typeof this.settings.success?s.addClass(this.settings.success):this.settings.success(s,e)),this.toShow=this.toShow.add(s)},getLength:function(e,t){switch(t.nodeName.toLowerCase()){case"select":return $("option:selected",t).length;case"input":if(this.checkable(t))return this.findByName(t.name).filter(":checked").length;case"textarea":return/\r\n/.test(e)?e.length:e.length+e.split("\n").length-1}return e.length},focusInvalid:function(){var e=$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]);if(this.settings.focusInvalid)try{e.filter(":visible").focus().trigger("focusin"),navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&$(window).scrollTop(e.offset().top)}catch(e){}}}),function(e){new Class({Implements:Options,jQuery:"PhoneInput",options:{prefixMatch:new RegExp(/\+380/),mask:"+### ## ### ## ##",iphone:!1,skipKeys:["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End","PageDown","PageUp"]},initialize:function(t,i){return this.$el=e(t),0!==this.$el.length&&(this.setOptions(i),
this.options.iphone=null!=navigator.userAgent.match(/iphone/i),this.proxied={keyDown:e.proxy(this.keyDown,this),drop:e.proxy(this.drop,this),input:e.proxy(this.input,this),caret:e.proxy(this.caret,this)},this.bind(),this.applyMask(0),this)},bind:function(){this.$el.on("keydown.phoneinput",this.proxied.keyDown).on("paste.phoneinput",this.proxied.drop).on("input.phoneinput",this.proxied.input).on("drop.phoneinput",this.proxied.drop)},keyDown:function(e){if(e.metaKey)return!0;e=e||window.event;var t=e.which||e.charCode||e.keyCode,i=this.proxied.caret(this.$el),r=this.$el.val();if(8==(t=this.options.iphone&&127==t?8:t)){if(" "==r.charAt(i.begin-1)){if(i.begin==i.end)return this.proxied.caret(i.begin-1),!1;this.del1=!0}else" "==r.charAt(i.begin-2)?this.del2=!0:this.del1=!0;return!0}46==t&&(this.del1=!0)},applyMaskDelay:function(e){setTimeout(function(){this.applyMask(e)}.bind(this),1)},applyMask:function(e){var t,i,r,n=this.$el.val().trim(),s=n.length-1,a=this.proxied.caret(this.$el),o="";if(this.options.prefixMatch.test(n)){t=n.replace(/[^\d]/g,""),t=t.replace(/^380380/g,"380"),t=t.replace(/^3800(\d)/g,"380$1");for(var l=0,d=0;l<this.options.mask.length;l++)if("#"==(r=this.options.mask.charAt(l))){if(!(i=t.charAt(d)))break;d++,o+="#"==r?i:r}else o+=r}else{var u=n.charAt(0);t=n.replace(/[^\d]/g,""),t="+"==u?u+t:t,o=t}if(this.$el.val(o.trim()),e>0)this.proxied.caret(e,e);else if(a.begin>0){var e=a.begin,h=o.trim().length;e<s&&h>=s&&(" "==o.charAt(e-1)&&e++,this.proxied.caret(e,e))}},drop:function(e){this.applyMaskDelay(0)},input:function(e){var t=this.proxied.caret(this.$el);this.del2?(this.del2=!1,t.begin=t.begin-1):this.del1?this.del1=!1:t.begin=0,this.applyMask(t.begin)},caret:function(e,t){var i=this.$el[0];if("number"!=typeof e){if(i.setSelectionRange)e=i.selectionStart,t=i.selectionEnd;else if(document.selection&&document.selection.createRange){var r=document.selection.createRange();e=0-r.duplicate().moveStart("character",-1e5),t=e+r.text.length}return{begin:e,end:t}}if(t="number"==typeof t?t:e,i.setSelectionRange)i.setSelectionRange(e,t);else if(i.createTextRange){var r=i.createTextRange();r.collapse(!0),r.moveEnd("character",t),r.moveStart("character",e),r.select()}}})}(jQuery),function(e,t){"use strict";e.ajaxPrefilter(function(e,t,i){if(e.iframe)return e.originalURL=e.url,"iframe"}),e.ajaxTransport("iframe",function(t,i,r){function n(){l.each(function(t,i){var r=e(i);r.data("clone").replaceWith(r)}),s.remove(),a.one("load",function(){a.remove()}),a.attr("src","javascript:false;")}var s=null,a=null,o="iframe-"+e.now(),l=e(t.files).filter(":file:enabled"),d=null;if(t.dataTypes.shift(),t.data=i.data,l.length)return s=e("<form enctype='multipart/form-data' method='post'></form>").hide().attr({action:t.originalURL,target:o}),"string"==typeof t.data&&t.data.length>0&&e.error("data must not be serialized"),e.each(t.data||{},function(t,i){e.isPlainObject(i)&&(t=i.name,i=i.value),e("<input type='hidden' />").attr({name:t,value:i}).appendTo(s)}),e("<input type='hidden' value='IFrame' name='X-Requested-With' />").appendTo(s),d=t.dataTypes[0]&&t.accepts[t.dataTypes[0]]?t.accepts[t.dataTypes[0]]+("*"!==t.dataTypes[0]?", */*; q=0.01":""):t.accepts["*"],e("<input type='hidden' name='X-HTTP-Accept'>").attr("value",d).appendTo(s),l.after(function(t){var i=e(this),r=i.clone().prop("disabled",!0);return i.data("clone",r),r}).next(),l.appendTo(s),{send:function(t,i){a=e("<iframe src='about:blank' name='"+o+"' id='"+o+"' style='display:none'></iframe>"),a.one("load",function(){a.one("load",function(){var e=this.contentWindow?this.contentWindow.document:this.contentDocument?this.contentDocument:this.document,t=e.documentElement?e.documentElement:e.body,r=t.getElementsByTagName("textarea")[0],s=r&&r.getAttribute("data-type")||null,a=r&&r.getAttribute("data-status")||200,o=r&&r.getAttribute("data-statusText")||"OK",l={html:t.innerHTML,text:s?r.value:t?t.textContent||t.innerText:null};n(),i(a,o,l,s?"Content-Type: "+s:null)}),s[0].submit()}),e("body").append(s,a)},abort:function(){null!==a&&(a.unbind("load").attr("src","about:blank"),n())}}})}(jQuery),function(e){var t=window.history.location||window.location,i={Extends:ModalWnd,jQuery:"EditBlock",options:{sbmturl:"/_data/_ajax/controller.php",rid:0,fordel:!1,useAYS:!0,ajaxopt:{},baseValObj:{onsubmit:!1,errorTitle:lang.err,errorMessage:e.validator.format(lang.validate.error_message,lang.save)},pressEsc:1},submitResult:{},_build:function(){var e=this.options;e.el&&(this.$el=e.el),e.fordel?this.builddel():this.buildopen()},buildopen:function(){var i=this.options,r=e("body"),n=this;if(i.thepage="body"==this.$el.selector,e(window).on("popstate",function(e){e.stopImmediatePropagation(),setTimeout(function(){-1==t.href.indexOf("#")&&(i.thepage||!i.thepage&&e.originalEvent.state)&&(t.href=t.href)},30)}),i.thepage)return this.container=this.wnd=this.$el,this.close=function(){return!0},void this.initform();this.wnd=e("<div />",{css:{position:"fixed",left:0,top:5e3,zIndex:999,height:"100%",display:"none"},class:"container-absolute"}).appendTo(r),this.container=this.wnd,this.active=!1,r.keydown(this.proxied.checkEsc),this.$el.click(function(e){e.preventDefault(),n.open()})},builddel:function(){var e=this;this.$el.click(function(t){t.preventDefault(),e.del()})},open:function(t){this.active=!0,this.goback=!0;var i=this,r=this.options,n=this.pageurl();t||history.pushState({part:r.pclass,rid:r.rid,pid:r.pid},null,n),e('<a href="#" class="link-close blclose" title="close"><span class="glyphicon glyphicon-remove"></span></a>').appendTo(this.wnd),e("a.blclose",this.wnd).click(this.proxied.close),this.wnd.css({display:"block"}),this.options.pressEsc=0,this.wnd.animate({top:"0px"},{duration:400,complete:function(){e("header, nav, #center, footer, .shut-off-mess, .holiday-banner-bl").hide(),e(window).scrollTop(0),i.wnd.css({position:"absolute"}),i.hasOwnProperty("sf")||e("<div />",{class:"load-form"}).appendTo(i.wnd),i.options.pressEsc=1}});var s=r.ajaxgetformurlRelative?r.ajaxgetformurlRelative:r.sbmturl;e.ajax({url:s,data:this.prepdataOpen(),cache:!1,success:function(t){i.active&&i._prevalidate(t)&&(i.setContent(t),i.initform(),e(window).off("popstate"),e(window).on("popstate",function(e){i.active&&(i.goback=!1,i.close()),e.originalEvent.state&&void 0!==e.originalEvent.state.part&&e.originalEvent.state.part==r.pclass&&"\\Work\\Model\\Form\\Employer\\EmployerCommentAddeditForm"!=e.originalEvent.state.part&&i.open(1)}))}})},close:function(){var t=this;return e("header, nav, #center, footer, .holiday-banner-bl").show(),this.wnd&&this.wnd.css({display:"none",top:"1000px",position:"fixed"}).empty(),this.active=!1,this.goback&&(history.back(),setTimeout(function(){window.location.hash=t.options.urlpart,e(window).trigger("scroll")},10)),delete this.validator,delete this.sf,!1},checkEsc:function(e){this.active&&!this.options.thepage&&this.options.pressEsc&&27==e.keyCode&&this.hasOwnProperty("sf")&&!this.sf.hasClass("dirty")&&this.close()},initform:function(){var t=this,i=this.wnd,r=this.options;this.wasDirty=!1,this.sf=e("#sendform",i),e(document).popoverInit(),r.useAYS&&this.sf.areYouSure({usedialog:!0,onEscape:!r.thepage,container:t.wnd,dialogOptions:{footer_buttons:[{name:lang.save,type:"button",close_on_click:1,func:function(){t.submitForm()}},{name:lang.no_save,type:"button",close_on_click:1,func:function(){r.thepage?t.reloadblock():t.close()}},{type:"or-cancel"}]}}).on("dirty.areYouSure",function(){t.wasDirty=!0}).on("clean.areYouSure",function(){t.wasDirty=!1}),r.thepage||e("a.blclose",i).click(function(e){return t.sf.hasClass("dirty")||t.close(),!1}),this.sf.submit(function(e){e.preventDefault(),!1===t.submitForm()&&t.validator.focusInvalid()}),this.blocked=e("input[name='blocked']",i),this.blocked.length>0&&1==this.blocked.val()&&this.blocked.ModalBPWnd({title:lang.resume_edit.warn_activate_title,content:lang.resume_edit.warn_activate_body,footer_buttons:[{name:lang.resume_edit.warn_activate_ok,type:"button",func:function(){t.blocked.val(3),t.submitForm()},close_on_click:1},{name:lang.resume_edit.warn_activate_cancel,type:"or-cancel",func:function(){t.blocked.val(2),t.submitForm()}}]}),e("textarea").adoptTextAreaHeight(),this.validator=this.sf.validate(t.loadvalidator())},afterValidate:function(){return!(this.blocked.length>0&&1==this.blocked.val()&&this.wasDirty)||(this.blocked.ModalBPWnd("open"),!1)},submitForm:function(){var t=this.options,i=this,r=this.wnd,n=e("#submitbtn",r);return this.validator.hideFormError(),!!this.validator.form()&&(!!this.afterValidate()&&(n.prop("disabled",!0),e.ajax(e.extend({},{type:"post",url:t.sbmturl,data:this.prepdata(),dataType:"json",success:function(e){i._prevalidate(e)&&(n.prop("disabled",!1),i.submitResult=e,"err"==e.status?i.validator.showPostErrors(e.message):"err_secr"==e.status?i.validator.showPostErrors(e.title,e.text):i.reloadblock())}},t.ajaxopt)),!0))},_prevalidate:function(e){if("object"==typeof e){if(e.hasOwnProperty("reload"))this.pagereload();else if("redirect"==e.status)this.options.useAYS&&this.sf.areYouSure("reset"),window.location.href!=e.url?window.location.href=e.url:window.location.reload(!0);else if(""!=e.status)return!0;return!1}return!0},prepdata:function(){var t=this.options,i={func:"saveform",part:t.pclass,rid:t.rid};return void 0!==t.pid&&(i.pid=t.pid),e.param(i)+"&"+this.sf.serialize()},prepdataOpen:function(){var e=this.options,t={func:"getform",part:e.pclass,rid:e.rid};return void 0!==e.pid&&(t.pid=e.pid),t},loadvalidator:function(){return this.baseValObj},pagereload:function(){this.hasOwnProperty("sf")&&this.sf.areYouSure("reset"),window.location.reload(!0)},pageurl:function(){var e=this.options;return"//"+window.location.hostname+Work.localeService.getURLPrefix(e.slang)+"/jobseeker/my/resumes/edit/"+e.urlpart+"/?id="+e.rid+(void 0===e.pid?"":"&pid="+e.pid)},redirecturl:function(){var e=this.options;return"//"+window.location.hostname+Work.localeService.getURLPrefix(e.slang)+"/jobseeker/my/resumes/edit?id="+e.rid+"#"+e.urlpart},reloadblock:function(){var t=this.options,i=this;this.wnd;if(t.thepage){var r=this.sf.data("outhref")||this.redirecturl();this.sf.removeData("outhref"),this.sf.areYouSure("reset"),window.location.href=r}else e.ajax({url:t.sbmturl,data:{func:"viewform",part:t.pclass,rid:t.rid},cache:!1,success:function(e){if("redirect"===e.status)window.location.href=e.url;else{var r=i.$el.parents("div.card");i.close(),r.replaceWith(e),window.initfunc[t.pclass](),i.reloadblockAfter(),r.popoverInit()}}})},reloadblockAfter:function(){this.submitResult.hasOwnProperty("is_active")&&1==this.submitResult.is_active&&e("#blockirovka").hide()},del:function(){this.delconfirmation()&&this.delconfirmed()},delconfirmation:function(){return confirm(lang.del[this.options.urlpart])},delconfirmed:function(){var i=this.options,r=this;e.ajax({type:"post",url:i.sbmturl,data:{func:"del",part:i.pclass,rid:i.rid,pid:i.pid},dataType:"json",success:function(e){if("redirect"===e.status)window.location.href!==e.url?window.location.href=e.url:t.reload();else{if(!r._prevalidate(e))return;r.reloadblock()}}})},checkRedactorTextLen:function(t,i,r){var n=e(i).redactor("core.object");return!(n&&n.opts.CalculatedCharsCount>r)}};EditBlock=new Class(i)}(jQuery),function(e){var t={Extends:ModalWnd,jQuery:"SendResume",options:{text_response:!1,file_max_size:200,file_types:["doc","odt"],havesent:"",pressEsc:1},_build:function(){var t=this.options,i=e("body"),r=this;if("body"==this.$el.selector)return this.container=this.wnd=this.$el,this.close=function(){return!0},this.initform(),void e(window).on("popstate",function(e){e.originalEvent.state||(location.href=location.pathname)});this.wnd=e("<div />",{class:"container-absolute",css:{display:"none",height:"100%",position:"fixed"}}).appendTo(i),this.container=this.wnd,this.active=!1,i.keydown(this.proxied.checkEsc),e.ajax({url:"/_data/_ajax/send_resume.php",data:{func:"getform",jobid:t.jobId},cache:!1,success:function(t){r._prevalidate(t)&&(r.setContent(t),r.initform(),e(window).off("popstate"),e(window).on("popstate",function(e){location.pathname.match(/\/jobs\/\d+/)&&(r.goback=!1,r.close()),e.originalEvent.state&&r.open(1)}))}}),this.$el.click(function(t){!0===e(document).find("#sendto_email").prop("checked")&&e(document).find("#sendto_telegram").length>0&&e.ajax({url:"/_data/_ajax/send_resume.php",data:{func:"savestat",type:"sendresume_open_c"}}),t.preventDefault(),r.open()})},open:function(t){this.active=!0,this.goback=!0;var i=this,r=this.options,n="//"+location.hostname+Work.localeService.getURLPrefix(r.slang)+"/jobseeker/my/resumes/send/?id="+r.jobId;t||history.pushState({jobId:r.jobId},null,n),i.options.pressEsc=0,setTimeout(function(){i.wnd.css({display:"block"}),i.wnd.animate({top:"0px"},{duration:400,complete:function(){e("header, nav, #center, footer, .shut-off-mess, .holiday-banner-bl").hide(),e(window).scrollTop(0),i.wnd.css({position:"absolute"}),i.options.pressEsc=1}})},50),e(window).off("popstate"),e(window).on("popstate",function(e){location.pathname.match(/\/jobs\/\d+/)&&(i.goback=!1,i.close()),e.originalEvent.state&&i.open(1)})},checkEsc:function(e){this.active&&this.options.pressEsc&&27==e.keyCode&&this.close()},close:function(){return e("header, nav, #center, footer, .holiday-banner-bl").show(),e("body").trigger("click"),this.wnd.css({display:"none",top:"1000px",position:"fixed"}),this.active=!1,this.goback&&history.back(),!1},setContent:function(e){this.container.html(e)},initform:function(){var t=this.options,i=this,r=this.container;e(".link-close, #fclose, .blclose",r).click(e.proxy(i.close,i)),this.mode=e("input[name^=mode]",r),t.text_response?this.initWithoutResumeForm():this.initResumeForm()},initResumeForm:function(){var t=(this.options,this),i=this.container;e("#setsaved, #setupload",i).click(function(){if(e(this).parent().hasClass("active"))return!1;t.mode.val("setsaved"===this.id?"resume":"file"),e.ajax({type:"post",url:"/_data/_ajax/send_resume.php",data:{id:this.id},dataType:"json"}),e("#setsaved",i).parent().toggleClass("active"),e("#setupload",i).parent().toggleClass("active"),e("#uploadresume",i).toggleClass("hide"),e("#savedresume",i).toggleClass("hide"),1==e("#commonresume",i).data("needhide")&&e("#commonresume",i).toggleClass("hide")}),e("#user_phone",i).PhoneInput({}),this.initFileInput(),e("#editpersonal",i).click(function(){e(this).hide(),e("#personal",i).toggleClass("hide"),e("#personaltext",i).toggleClass("hide")}),e("#addtextswtch",i).click(function(){t.validator.element("#addtext"),e("#addtext",i).toggleClass("hide")}),this.initSendForm()},initSendForm:function(){var t=this.options,i=this,r=this.container;t.showsent=e(t.havesent).length>0,t.showsent&&(e("input[name='confirmed']",r).val("1"),e("p.senttext",r).text(e(t.havesent).first().text())),e("button.resendno",r).click(function(t){t.preventDefault(),e("#havesent",r).toggleClass("hide"),e("#mainform",r).toggleClass("hide"),i.close()}),e("button.sendlimit",r).click(function(t){t.preventDefault(),e("#sendlimit",r).toggleClass("hide"),e("#mainform",r).toggleClass("hide"),i.close()}),e("button.resendyes",r).click(function(t){t.preventDefault(),e("input[name='confirmed']",r).val("1"),i.submitForm(!1)||(e("#havesent",r).addClass("hide"),e("#mainform",r).removeClass("hide"))}),this.sf=e("#sendform",r).submit(function(e){e.preventDefault(),i.submitForm(!0)}),this.errBl=e(".alert-danger",r),this.checkObj=i.loadValidator(),this.validator=this.sf.validate(this.checkObj),e("textarea").adoptTextAreaHeight()},deactivateFormFieldsInElement:function(t){e(t).find("input, textarea").attr("disabled","disabled")},initWithoutResumeForm:function(){e("#userphone-without-resume").PhoneInput({});var t=(this.options,this),i=this.container,r=function(){["#savedresume , #uploadresume, #withoutresume"].forEach(t.deactivateFormFieldsInElement),e(".tab-content:not(.hide)").find('input:not([data-disabled="disabled"]), textarea').prop("disabled",!1)};r(),e("#setsaved, #setupload, #setwithoutresume",i).click(function(){if(e(this).parent().hasClass("active"))return!1;t.mode.val("setsaved"===this.id?"resume":"setwithoutresume"===this.id?"withoutResume":"file"),e.ajax({type:"post",url:"/_data/_ajax/send_resume.php",data:{id:this.id},dataType:"json"}),e(".nav-tabs").find("li").removeClass("active"),e(this).parent().addClass("active"),e(".tab-content").addClass("hide"),e(e(this).data("selector")).removeClass("hide"),r()}),this.initFileInput(),e("#editpersonal",i).click(function(){e(this).hide(),e("#personal",i).toggleClass("hide"),e("#personaltext",i).toggleClass("hide")}),e("#editpersonal-without-resume",i).click(function(){e(this).hide(),e("#personal-without-resume",i).toggleClass("hide"),e("#personaltext-without-resume",i).toggleClass("hide")}),e("[name=addtextswtch]",i).click(function(){var t=e(this).parents(".tab-content").find("textarea[name=addtext]");t.toggleClass("hide"),t.hasClass("hide")?t.prop("disabled",!0):t.prop("disabled",!1)}),this.initSendForm()},initFileInput:function(){var t=this,i=this.container,r=e("input:file",i);""!=r.attr("value")&&(this.setfileName(r.attr("value")),this.showfileName()),r.change(function(){t.sendFile(this)})},setfileName:function(t){var i=this.container,r=e("#fselbtn a",i),n=e("#fnameblk",i),s=this.fileType(t);r.hasClass("btn")&&r.removeClass().addClass("text-blue-light").text(lang.resume_send.change).parent().parent().addClass("fl-name"),e("span.icon",n).removeClass().addClass("icon icon-"+s).find("i").text(s),e("span.f-name",n).text(t+"."),n.hide(),r.hide()},showfileName:function(){e("#fselbtn a",this.container).show(),e("#fnameblk",this.container).show()},submitForm:function(t){var i,r=this.options,n=this,s=this.container,a=e("#submitbtn",s);return 1==a.prop("disabled")||!(t&&(this.errBl.data("prevtext")&&this.errBl.html(this.errBl.data("prevtext")),i=this.validator.form(),e(window).scrollTop(0),!i))&&(r.showsent&&t?(n.showConfirmation("#havesent"),!0):(a.prop("disabled",!0),e.ajax({type:"post",url:"/_data/_ajax/send_resume.php",data:this.sf.serialize(),dataType:"json",success:function(t){if(n._prevalidate(t))if("err"==t.status){var i=t.message;"object"==typeof i?(i.hasOwnProperty("user_email")&&e("#editpersonal:visible",s).click(),n.validator.showErrors(i),n.errBl.show()):(n.errBl.data("prevtext")||n.errBl.data("prevtext",n.errBl.html()),n.errBl.find("p").html(i),n.errBl.show()),e("#mainform",s).hasClass("hide")&&(e("#havesent",s).toggleClass("hide"),e("#mainform",s).toggleClass("hide")),a.prop("disabled",!1)}else"needconfirm"==t.status?(e("p.senttext",s).text(t.hasOwnProperty("message")?t.message:""),n.showConfirmation("#havesent"),a.prop("disabled",!1)):"sendlimit"==t.status?(e("p.nexttime",s).html(t.message),e("#havesent",s).addClass("hide"),n.showConfirmation("#sendlimit"),a.prop("disabled",!1)):location.assign("//"+location.hostname+Work.localeService.getURLPrefix(r.slang)+"/jobseeker/my/resumes/sent/?job_id="+r.jobId+(t.hasOwnProperty("save")?"&save=1":""))}}),!0))},_prevalidate:function(e){if("object"==typeof e){if(e.hasOwnProperty("reload"))this.pagereload();else if("redirect"==e.status)location.assign(e.url);else if(""!=e.status)return!0;return!1}return!0},showConfirmation:function(t){e("#mainform",this.container).addClass("hide"),e(t,this.container).removeClass("hide"),e(window).scrollTop(0)},loadValidator:function(){var t=this.container,i=this.options,r=this,n={required:!0,email:!0,remote:{url:"/_data/_ajax/send_resume.php",type:"post",data:{func:"checkemail",email:function(){return e("#email",t).val()}},dataFilter:function(i){var r=JSON.parse(i),n=r.status,s=e("#email",t);if("good"===n||"wrong_mx"===n)return"wrong_mx"===n?setTimeout(function(){e(s).parent().addClass("has-warning").find("p").remove(),e("<p>").insertAfter("#email").addClass("text-warning").html(lang.form_errs.check_email)},50):e(s).parent().removeClass("has-warning has-danger").find("p").remove(),'"true"';switch(n){case"work":n=lang.form_errs.bad_email;break;case"law":var a=s.val().match(/@(.+?)$/i);a=a?" "+a[1].trim():"",n=lang.form_errs.email_not_exist_law.replace("%s",a);break;case"badmail":n=lang.resume_send.err_bad_email;break;default:n=lang.resume_send.bad_email}return e(s).parent().removeClass("has-warning").next("p").remove(),'"'+n+'"'}}},s={onfocusout:function(t){if("resume_file"!=t.name){var i=e(t).valid();"user_email"==t.name&&0==i&&e(t).parent().hasClass("has-warning")&&e(t).parent().removeClass("has-warning");0==this.numberOfInvalids()&&r.errBl.hide()}},rules:{user_name:{required:!0,checkNum:!0,checkFio:!0},user_email:n,user_phone:{checkPhone:!0,required:function(){return"withoutResume"===r.mode.val()},remote:{url:"/_data/_ajax/controller.php",type:"post",data:{func:"check",part:"JobseekerPhoneConfirm",validation:1,rid:0,phone:function(){return"withoutResume"===r.mode.val()?e("#userphone-without-resume").val():e("#user_phone").val()}}}},addtext:{checkSite:!0,maxlength:1e3},savedresumes:{required:!0,onlyother:!0},resume_file:{required:function(){return"file"===r.mode.val()&&""==e("input[name='file_checksum']",t).val()&&!r.hasOwnProperty("erraftresave")},extsize:function(){return"file"===r.mode.val()&&i},aftersave:function(){return"file"===r.mode.val()&&i}}},messages:{user_name:{required:lang.resume_send.err_user_name,checkNum:lang.form_errs.illegal_symbols2,checkFio:lang.resume_send.err_user_name},user_email:{required:lang.form_errs.empty_email_long,email:lang.resume_send.bad_email},savedresumes:{required:lang.resume_send.err_radiobox},user_phone:{checkPhone:lang.resume_send.err_wrong_mobilephone_number,required:lang.resume_send.err_wrong_mobilephone_number,remote:lang.resume_send.err_wrong_mobilephone_number},resume_file:{required:lang.resume_send.err_no_select_file},addtext:{checkSite:lang.resume_send.err_other_site,maxlength:lang.resume_send.err_area_length}},errorPlacement:function(t,i){var r=i[0];if("radio"!=r.type&&"checkbox"!=r.type||(i=i.parent().hasClass("test-bl")?i.parent():i.parents(".has-indent")),!i.hasClass("test-bl"))if("resume_file"==r.id){var n=i.parent("div");n.next("p").remove(),t.insertAfter(n)}else e(i).next("p").remove(),t.insertAfter(i)},invalidHandler:function(e,t){t.numberOfInvalids()?r.errBl.show():r.errBl.hide()}},a=e(".testfld",t),o="",l=function(){return o};return a.length&&a.each(function(){var t=e(this),i=t.data("qt"),r=t.data("i");1==i?s.rules["q["+r+"]"]={required:!0}:2==i?s.rules["q["+r+"][]"]={required:!0}:s.rules["other["+r+"]"]={required:!0}}),e.validator.addMethod("extsize",function(e,t,i){var n,s=i.file_types.join(", "),a=r.fileExt(e);if(!s.match(a)){var l=s.replace(/[,](\s[a-zA-Z]+)$/g,lang.resume_send.err_file_type_or+"$1");return o=lang.resume_send.err_file_type.replace("%s",l)+".",!1}return!(window.File&&(n=t.files[0])&&n.size/1024>i.file_max_size)||(o=lang.resume_send.err_file_size2,!1)},l),e.validator.addMethod("checkPhone",function(e){var t=e.match(/[^-+()\d\s]/gi),i=e.match(/\d/gi);if(null!=t)o=lang.resume_send.err_wrong_phone_number_format;else{if(!(null!=i&&i.length<10))return!0;o=lang.resume_send.err_wrong_phone_number_format}},l),e.validator.addMethod("aftersave",function(){return!r.hasOwnProperty("erraftresave")||(o=r.erraftresave,!1)},l),e.validator.addMethod("checkSite",function(e){return null==e.match(/rabota\.ua|hh\.ua|job\.ukr\.net|jobs\.ua/gi)}),s},fileExt:function(e){if(void 0==e)return"";var t=e.split(".");return 1===t.length||""===t[0]&&2===t.length?"":t.pop().toLowerCase()},fileType:function(e){switch(this.fileExt(e)){case"doc":case"docx":case"odt":case"rtf":return"doc";case"pdf":return"pdf";case"txt":return"txt"}return"unk"},sendFile:function(t){if(""===t.value)return!1;var i=this,r=this.container,n=e("input[name='file_checksum']",r),s=e("#submitbtn",r),a=e(t),o=a.val().split("\\").pop();if(1==s.prop("disabled"))return!1;if(delete this.erraftresave,this.setfileName(o),!i.validator.element(a))return void this.showfileName();n.val("");var l=a.nextAll("img").css("visibility","visible");s.prop("disabled",!0).data("ptxt",s.text()).text(lang.resume_send.uploading),e.ajax("/_data/_ajax/send_resume.php",{files:a,iframe:!0}).complete(function(t){var a=e("input[name='resume_file']",r);200==t.status&&t.hasOwnProperty("responseJSON")&&t.responseJSON.hasOwnProperty("status")&&(t=t.responseJSON,"ok"==t.status?(n.val(t.file_checksum),0==i.validator.numberOfInvalids()&&i.errBl.hide()):(a.wrap("<form>").closest("form").get(0).reset(),a.unwrap(),i.erraftresave=t.message)),i.showfileName(),s.prop("disabled",!1).text(s.data("ptxt")),l.css("visibility","hidden"),i.validator.element(a)})},pagereload:function(){location.reload(!0)},showResumeWindow:function(e){var t=screen.width/2-400,i=screen.height/2-350;window.open("/jobseeker/my/resumes/preview/?id="+e,"_blank","width=800,height=700,menubar=no,scrollbars=yes,status=yes,toolbar=no,resizable=yes,top="+i+",left="+t)}};SendResume=new Class(t),e.fn.resetForm=function(){return e("div.fld-radio, div.nolabels",this).removeClass("f-err"),e("input[name='file_checksum']",this).val(""),e("input[name='resume_file']",this).val("").nextAll("b.b-file").text(""),e(".b-on-r-m",this).hide(),this}}(jQuery),function(e){var t={Extends:EditBlock,jQuery:"Complain",options:{useAYS:!1,pclass:"Complain"},initform:function(){this.parent(),e("#complainArea").adoptTextAreaHeight()},pageurl:function(){var e=this.options;return"//"+location.hostname+Work.localeService.getURLPrefix(e.slang)+"/complain/?id="+e.rid+"&type=j"},close:function(){return e("header, nav, #center, footer, .holiday-banner-bl").show(),this.wnd&&this.wnd.css({display:"none",top:"1000px",position:"fixed"}).empty(),this.active=!1,this.goback&&history.back(),delete this.validator,delete this.sf,!1},submitForm:function(){var t=this.options,i=this,r=this.wnd,n=e("#submitbtn",r);return!!this.validator.form()&&(n.prop("disabled",!0),e.ajax({type:"post",url:t.sbmturl,data:this.prepdata(),dataType:"json",success:function(t){n.prop("disabled",!1),"err_secr"==t.status?i.validator.showPostErrors(t.title,t.text):"redirect"==t.status?window.location.assign(t.url):"err"==t.status?i.validator.showPostErrors(t.message):"ok"==t.status&&(e("#complain_bl",r).toggleClass("hide"),e("#mess_havesent",r).toggleClass("show"))}}),!0)},prepdataOpen:function(){var e=this.options,t={func:"getform",part:e.pclass,rid:e.rid,type:e.type};return void 0!==e.pid&&(t.pid=e.pid),t},loadvalidator:function(){return valObj={errorMessage:e.validator.format(lang.validate.error_message,lang.send),rules:{message:{required:!0,minlength:4}},messages:{message:{required:lang.validate.messages.empty_complain,minlength:lang.validate.messages.short_complain}}},e.extend(!0,this.options.baseValObj,valObj)}};complainFunc={Classes:function(){Complain=new Class(t)},Init:function(){this.Classes(),this.JobComplain()},JobComplain:function(){var t=e("#complain");t.Complain({rid:t.data("rid"),type:"j"})}}}(jQuery);